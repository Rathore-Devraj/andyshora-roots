<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>

/*#shapes {
  display: none;
  
}*/

</style>
</head>
<body>
<div id="line"></div>

<svg id="shapes" width="800" height="140" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">

 <g>
  <rect id="base" height="16" width="887" y="130.5" x="-13.5" stroke-width="0" stroke="#0fffff" fill="#000"/>
</g>
 <g>
  <title>Layer 1</title>
  <g id="svg_1" fill="none">
   <path id="london" d="M334.166,35.948c0.6,0.8,1,2.4,1,3.501c0,1.201,0.6,2.702,1.3,3.302c0.9,1.001,1.301,8.205,1.501,27.214 c0.199,14.307,0.7,26.013,1.2,26.013c0.4,0,3.102-1.801,6.003-4.102l5.203-4.103l-0.5-5.103c-0.4-5.902,0-8.004,1.601-7.003 c0.5,0.3,2.001-0.601,3.202-2.102l2.201-2.801l0.7,2.602c0.4,1.7,1.3,2.601,2.601,2.601c1,0,2.202,0.9,2.501,2.001 c0.7,2.201,1.9,2.401,6.103,1.101c1.601-0.501,6.903-1.3,11.706-1.601c5.303-0.4,9.004-1.201,9.205-1.801 c0.2-0.7,0.601-3.002,1-5.104c0.4-2.601,0.901-3.501,1.501-2.7c1.1,1.801,2.901,0.499,4.502-3.202l1.201-3.002l1.201,3.503 c0.7,2.101,2.201,4.001,3.601,4.602c2.301,1.101,2.501,1.7,2.501,7.604s0.2,6.604,3.002,8.904c1.601,1.401,5.402,3.702,8.504,5.202 c3.002,1.502,5.503,3.103,5.503,3.603c0,0.501,1.501,0.9,3.401,0.9c3.402,0,3.402,0,4.002-5.803 c1.201-11.006,1.801-14.307,3.602-17.909l1.801-3.701l1.602,3.201c0.9,1.701,1.601,4.002,1.601,5.203 c0,3.502,2.402,10.004,3.702,10.004c0.701,0,1.301-0.5,1.301-1.1c0-0.501,0.5-0.701,1.001-0.4c0.6,0.3,1.3-0.2,1.7-1.201 c0.399-1,1.701-2.801,3.102-4.102l2.401-2.301l4.402,4.701c3.001,3.103,4.902,4.402,6.003,4.003c0.9-0.301,1.399-1.301,1-2.102 c-0.3-0.8-0.1-1.7,0.399-2.001c0.602-0.399,1.001-1.9,1.001-3.502c0-1.601,0.802-4.502,1.702-6.502l1.7-3.604l1.801,3.803 c1.001,2.001,1.801,5.203,1.801,7.004c0,2.301,0.5,3.302,1.501,3.302c1.2,0,1.501-1.601,1.501-8.204 c0-6.404,0.299-7.904,1.199-7.004c1.602,1.601,4.803,1.501,4.903-0.1c0-0.601,0.4-0.301,0.9,0.8c0.501,1.101,0.9,5.703,0.9,10.206 c0.1,4.602,0.4,8.303,0.8,8.303c0.301,0,1.502-0.7,2.502-1.7c1.701-1.501,1.9-1.501,3.602,0c1.001,1,2.201,1.7,2.501,1.7 c0.4,0,0.701-4.201,0.701-9.404c0-5.303,0.399-9.805,1-10.105c0.601-0.3,1.001-0.1,1.001,0.401c0,1.5,4.001,1.4,4.102-0.2 c0-0.601,0.399-0.301,0.9,0.8s0.9,8.604,0.9,16.708c0.101,8.805,0.501,14.808,1.101,14.808c2.802,0,3.502-4.902,3.602-26.313 c0.101-12.006,0.4-22.11,0.801-22.411c0.3-0.299,0.701-2.2,0.701-4.201l0.099-3.602l1.101,4.201 c0.501,2.402,1.301,4.302,1.602,4.302c0.3,0,0.399,9.605,0.199,21.211c-0.299,18.81-0.099,21.611,1.502,24.513 c2,3.901,2.901,4.102,3.901,1.001c0.7-2.102,0.7-2.102,1.2-0.201c0.301,1.102,1.201,2.502,2.001,3.202 c0.9,0.7,1.301,1.901,1.001,2.701c-0.4,0.9-0.2,1.801,0.4,2.101c0.5,0.4,0.7,1.102,0.4,1.602c-0.4,0.5,0.1,0.9,0.9,0.9 c0.899,0,1.6,0.4,1.6,1c0,0.5,2.402,1.001,5.304,1.001c2.801,0,6.303,0.7,7.704,1.5c1.4,0.801,3.701,1.901,5.202,2.502 c1.501,0.7,4.402,2.101,6.503,3.201s5.603,2.401,7.804,2.901c2.202,0.4,7.403,1.701,11.506,2.901 c6.303,1.701,11.306,2.102,30.616,2.501c12.806,0.301,25.512,1.001,28.413,1.502c2.901,0.6,5.403,1,5.603,1 c0.2,0,0.4-0.9,0.4-2.001s-0.701-2.001-1.501-2.001c-1.601,0-3.802-3.401-2.802-4.402c0.301-0.301,0.602-2.201,0.501-4.102 c-0.1-3.602,3.202-8.505,5.903-8.505c1.901,0,5.902,4.903,5.902,7.204c0,1.101,0.4,2.701,0.9,3.701 c1.401,2.502,0.301,5.803-2.102,6.403c-1.4,0.4-1.899,1.2-1.601,2.802c0.2,2.001,1.302,2.501,6.304,3.602 c8.904,1.801,9.504,1.701,9.504-1.5c0-1.602-0.8-3.202-2-4.002c-2.502-1.502-2.602-5.703-0.2-6.805 c3.302-1.4,7.104-1.4,8.604,0.201c2.102,2.101,2,5.702-0.2,7.104c-1.4,0.8-1.7,2-1.4,4.701l0.399,3.603h6.903h6.903v-3.001 c0-2.002-0.5-3.002-1.5-3.002c-1.602,0-3.802-3.402-2.802-4.402c0.3-0.3,0.601-2.201,0.5-4.102 c-0.099-3.603,3.202-8.504,5.903-8.504c1.901,0,5.903,4.901,5.903,7.203c0,1.1,0.399,2.701,0.9,3.701 c1.4,2.502,0.3,5.803-2.001,6.404c-1.301,0.299-1.901,1.4-1.901,3.101c0,2.501,0.301,2.602,5.003,2.602 c4.102,0,5.002-0.3,5.002-1.801c0-0.901-0.9-2.302-2-3.001c-2.502-1.502-2.603-5.703-0.2-6.805c3.301-1.4,7.103-1.4,8.604,0.201 c2.2,2.101,2,5.703-0.401,7.203c-3.401,2.102-1.399,4.202,4.103,4.202h4.901v-4.802c0.101-4.604,0.201-4.803,6.904-9.906 l6.903-5.302l7.104,5.603c6.903,5.402,7.104,5.604,7.104,10.005c0,2.401,0.5,4.402,1,4.402c0.601,0,1.001-2.101,1.001-4.802 c0.1-4.604,0.2-4.803,6.903-9.906l6.903-5.302l7.104,5.603c6.903,5.402,7.104,5.604,7.104,10.005c0,4.402,0,4.402,3.502,4.402 c2.701,0,3.502-0.399,3.502-1.801c0-0.901-0.9-2.302-2.002-3.001c-2.501-1.502-2.601-5.703-0.199-6.805 c3.302-1.4,7.104-1.4,8.604,0.201c2.201,2.101,2.001,5.703-0.399,7.203c-3.402,2.102-1.401,4.202,4.102,4.202 c4.803,0,4.902-0.101,4.902-3.001c0-2.002-0.5-3.002-1.5-3.002c-1.602,0-3.802-3.402-2.802-4.402c0.3-0.3,0.601-2.201,0.5-4.102 c-0.101-3.603,3.202-8.504,5.903-8.504c1.9,0,5.903,4.901,5.903,7.203c0,1.1,0.399,2.701,0.9,3.701 c1.399,2.502,0.299,5.803-2.001,6.404c-1.302,0.299-1.901,1.4-1.901,3.101c0,2.602,0.101,2.602,7.003,2.602h7.004v3.001V141 H400.198H0v-3.002v-3.001h10.505h10.505v-27.313l0.1-27.213l6.804-5.203l6.903-5.303l7.104,5.603l7.104,5.503v27.014v26.913h6.803 h6.703l0.101-14.808c0.1-16.107,1.6-24.712,5.902-33.116c7.304-14.507,17.309-9.204,22.611,11.905 c0.9,3.502,1.401,11.106,1.401,20.711c0,11.605,0.3,15.308,1.301,15.308c0.9,0,1.201-5.103,1.201-22.011V90.976h14.007h14.007 v22.011c0,21.311,0.1,22.011,2.001,22.011c1.201,0,2.101-0.801,2.501-2.301c0.5-2.501,11.505-86.844,11.605-89.444 c0-1.001,0.2-1.401,0.5-0.801c0.4,1.101,10.405,77.038,10.405,79.239c0,0.801,1.301,1.3,3.302,1.3c3.002,0,3.602-0.399,5.002-4.002 c1.501-3.901,1.601-4.001,6.603-4.001h5.103v-7.504v-7.504h7.504h7.503V89.174c0.1-10.005,2.602-24.812,3.102-18.009 c0.2,3.202,0.2,3.603,1.3,6.503c0.4,1.301,1.301,2.302,1.901,2.302c18.909,0.4,56.228-0.101,57.028-0.9 c0.5-0.501,1.201-3.001,1.4-5.503c1.001-8.704,2.501-4.802,4.002,10.605l0.5,5.803h4.703c2.501,0,5.603,0.301,6.903,0.6 c1.901,0.602,2.201,0.301,2.301-2.701c0-1.9,0.3-2.801,0.601-2.2c0.7,1.901,4.102,1.601,4.602-0.501c0.3-0.9,0.5,0.801,0.601,3.902 c0.1,6.504,0.5,6.703,11.405,6.504l6.204-0.101l0.6-6.003l0.6-6.004l0.101,5.104c0.1,2.801,0.8,5.603,1.5,6.203 c0.601,0.5,4.202,1,8.004,1h6.703l0.1-6.104c0.1-3.401,0.301-5.402,0.601-4.502c0.399,1.602,4.302,2.201,4.302,0.601 c0-0.4,0.3-0.8,0.8-0.8c0.4,0,0.6,1.801,0.4,4.002c-0.4,4.002-0.4,4.002,3.202,4.002h3.601v-4.803 c0.101-3.702,0.301-4.302,1.101-3.002c0.5,1.001,1.601,1.801,2.301,1.801c2.501,0,3.001-3.401,3.602-23.011 c0.4-12.606,1.101-20.71,2.001-23.012c0.7-1.901,1.5-4.202,1.701-5.002C333.265,34.647,333.366,34.647,334.166,35.948z"/>
  </g>
 </g>
</svg>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var london = document.getElementById('london');
var targetD = london.getAttribute('d');

var segments = london.pathSegList;
// console.log('segments', segments);

var arr = [];
for (var i in segments) {
  var x = segments.getItem(i).x;
  var y = segments.getItem(i).y;

  if (typeof x !== 'number') {
    console.error('x is ', typeof x, x);
  } else if (typeof y !== 'number') {
    console.error('y is ', typeof y, y);
  } else {
    arr.push({ x: x, y: y }); 
  }
}

console.log('arr', arr);

var base = document.getElementById('base');
var baseD = london.getAttribute('d');


//This is the accessor function we talked about above
var lineFunction = d3.svg.line()
                         .x(function(d) { return d.x; })
                         .y(function(d) { return d.y; })
                       .interpolate('linear');

var svgContainer = d3.select('#line').append('svg')
                                    .attr('width', 800)
                                    .attr('height', 140);
                                    // .attr('preserveAspectRatio', 'xMidYMid meet');

function getSmoothInterpolation() {
  var interpolate = d3.scale.linear()
      .domain([0, 1])
      .range([1, arr.length + 1]);

  return function(t) {
    var flooredX = Math.floor(interpolate(t));
    var interpolatedLine = arr.slice(0, flooredX);
        
    if(flooredX > 0 && flooredX < arr.length) {
        var weight = interpolate(t) - flooredX;
        var weightedLineAverage = arr[flooredX].y * weight + arr[flooredX-1].y * (1-weight);
        interpolatedLine.push( {"x":interpolate(t)-1, "y":weightedLineAverage} );
        }

    return lineFunction(interpolatedLine);
  }
}

//The line SVG Path we draw
var group = svgContainer
  .append('g');

var path = group.append('path')
  .attr('stroke-width', 2)
  .attr('stroke', 'blue')
  .attr('fill', 'red')
  .attr('d', lineFunction(arr));
  // .transition()
  // .duration(3000)
  // .attrTween('d', getSmoothInterpolation);


// var lineFunction = d3.svg.line()
//   .x(x)
//   .y(y);





</script>
</body>
</html>