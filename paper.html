<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.9.22/paper-full.min.js"></script>
  <meta charset="utf-8">
  <title>PaperJS Demo</title>
  <style type="text/css" media="screen">
    body {
      padding: 0;
      margin: 0;
      text-align: center;
      background: #e74c3c;
    }
    #myCanvas {
      background: #e74c3c;
      margin: 0 auto;
    }
  </style>
  <script type="text/paperscript" canvas="myCanvas">

    var positions = {
      eye: { x: 675, y: 110, radius: 60 },
      waves: { x: 300, y: 120, width: 200, height: 5, num: 12 }
    };
    

    // Create a new path and style it:
    var wave = new Path({
      strokeCap: 'square',
      fillColor: 'black'
    });

    wave.position = new Point(100, 100);

    // LIGHTS
    var lights = [];
    var lightPath = new Path.Circle({
      center: view.center,
      radius: 3,
      fillColor: 'red'
    });

    var light = new Symbol(lightPath);

    for (var i = 0; i <= 50; i++) {
      // lights.push(light.place(new Point(125 + (i * 15), 105)));
    }

    

    //  THE LONDON EYE WHEEL
    var leftLeg = new Path.Rectangle({
      point: [positions.eye.x - 63, positions.eye.y + 50],
      size: [100, 4],
      fillColor: 'black'
    });

    var rightLeg = new Path.Rectangle({
      point: [positions.eye.x - 38, positions.eye.y + 50],
      size: [100, 4],
      fillColor: 'black'
    });

    var wheel = new Path.Circle({
      center: [positions.eye.x, positions.eye.y],
      radius: 60,
      strokeColor: 'black',
      strokeWidth: 12
    });

    // wheel group to rotate together
    var londonEye = new Group([ wheel ]);

    for (var i = 0; i < 24; i++) {

      var theta = Math.PI * 2 * (i / 24);
      var x = positions.eye.x + 60 * Math.cos(theta) - 5;
      var y = positions.eye.y + 60 * Math.sin(theta) - 5;
      
      var car = light.place(new Point(x + 5, y + 5));

      // var rect = new Path.Rectangle({
      //   point: [x, y],
      //   size: [10, 10],
      //   fillColor: '#e74c3c'
      // });
      var spoke = new Path.Rectangle({
        point: [positions.eye.x - 55, positions.eye.y],
        size: [109, 1],
        fillColor: 'black'
      });
      // rect.rotate((360 / 24) * i);
      spoke.rotate((360 / 24) * i);

      // londonEye.addChild(rect);
      londonEye.addChild(spoke);
      londonEye.addChild(car);
    }

    

    rightLeg.rotate(75);
    leftLeg.rotate(-75);

    var river = new Path.Rectangle({
      point: [positions.waves.x, 0], // y position set on frame update
      size: [positions.waves.width, 50],
      fillColor: 'black'
    });

    var segments = [new Point(0, 250), new Point(23, 20), new Point(25, 40), new Point(27, 20), new Point(50, 250)];
    var shard = new Path(segments);
    shard.closed = true;
    shard.fillColor = 'black';

    // Add 5 segment points to the path spread out
    // over the width of the view:
    for (var i = 0; i <= positions.waves.num; i++) {
      wave.add(new Point((i / positions.waves.num), 1) * positions.waves.width);
    }

    for (var i = 0; i <= positions.waves.num; i++) {
      var segment = wave.segments[i];

      var sinus = Math.sin(0 * 3 + i);
      
      // Change the y position of the segment point:
      segment.point.y = sinus * positions.waves.height + 180;

    }
    function onFrame(event) {
      // Loop through the segments of the path:
      for (var i = 0; i <= positions.waves.num; i++) {
        var segment = wave.segments[i];

        // A cylic value between -1 and 1
        var sinus = Math.sin(event.time * 3 + i);
        
        // Change the y position of the segment point:
        // segment.point.y = sinus * positions.waves.height + 180;

      }
      river.position.y = wave.segments[0].point.y + 22;
      
      wave.smooth();

      londonEye.rotate(.1);

      light.definition.fillColor.hue += 1;

    }
    
  </script>
</head>
<body>
<canvas id="myCanvas" width="1000" height="200"></canvas>
  
</body>
</html>